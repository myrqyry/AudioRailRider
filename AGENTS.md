# **ü§ñ AI Coding Agent Mandate & Protocol: The Definitive Specification**

This document serves as the singular, authoritative source of truth, detailing the mandatory technical stack, quality assurance protocols, and conversational interaction style required for all artifacts generated by the AI Coding Agent. Compliance with all items is **non-negotiable** unless explicitly waived.

## **1\. ‚öôÔ∏è Technical Stack & Configuration Mandates**

The agent **MUST** operate exclusively within the constraints of the following "Core Power Stack."

| Layer | Technology Mandate | Architectural Compliance Protocol |
| :---- | :---- | :---- |
| **Frontend** | React \+ TypeScript \+ Vite | All UI components must use this stack, employing Vite for high-speed HMR. |
| **Styling** | Tailwind CSS \+ shadcn/ui | Utilize utility-first styling. **shadcn/ui** is the mandated component foundation, strictly prohibiting monolithic libraries (MUI, Chakra). |
| **Front/Back Logic** | TypeScript (Node.js) | Mandatory for all client-side and primary server-side logic, ensuring static type safety. |
| **Compute/ML** | Python (FastAPI \+ Pydantic) | Reserved exclusively for high-demand, AI, ML, or complex computational services. Pydantic is non-negotiable for schema validation. |
| **Animations** | GSAP | **ALWAYS** the preferred library for complex, sequenced, or high-performance animations. The agent acknowledges GSAP and all plugins are **100% free** for commercial use. |
| **Design System** | Material 3 (M3) | Component aesthetics and interaction MUST align with M3 principles (tonal surfaces, high contrast, expressive typography). |
| **Dependencies** | pnpm (Monorepo), Poetry (Python) | pnpm MUST be used for the monorepo structure. Poetry MUST be used within all Python environments for dependency isolation. |
| **Generative AI** | Google GenAI SDK | **MANDATORY**: Use the unified packages (@google/genai or google-genai). The deprecated generativeai libraries is strictly forbidden. |

## **2\. üõë Quality, Integrity, & Deployment Directives (Non-Negotiable)**

These directives define the agent's procedural behavior and code quality standards.

### **2.1. Pre-Commit Analysis & Project Stewardship**

* **Analyze Existing Stack (Highest Priority):** Before writing any code, the agent **MUST** analyze existing files, configuration (e.g., tailwind.config.js), and package lists to confirm the current technologies in use (React, Vue, etc.). All generated code **MUST** strictly adhere to the identified stack.  
* **Search Before Creating:** Before generating a new function, class, or component, the agent **MUST** search the project to determine if a similar utility already exists.  
* **Prioritize Existing Code:** If a relevant component or utility is found, the agent **MUST** use it or suggest how to modify it. Do **NOT** create a duplicate from scratch.  
* **Analyze Folder Structure:** When creating a new file, the agent **MUST** analyze the existing directory structure to place the new file in the most appropriate, existing folder. Do not assume a path.

### **2.2. Architecture & Deployment Configuration**

* **Architecture Mandate:** The development structure **MUST** be a **pnpm Monorepo** organized into logical boundaries: apps/frontend, apps/backend (Node.js/TS), apps/compute (Python/FastAPI), and a dedicated packages/shared library (TypeScript) for common types, constants, and utilities.  
* **Local Host Binding:** All local development server bindings **MUST** explicitly use the loopback address 127.0.0.1.  
* **Deployment Configuration:** Server code **MUST** be configured to bind to the interface address 0.0.0.0 and the $PORT environment variable.  
* **Dockerfiles:** The generation of explicit Dockerfiles is **STRICTLY FORBIDDEN**. Deployment assumes PaaS Buildpacks for containerization.

### **2.3. Code Quality, Style, & Integrity**

* **Match Existing Style:** The agent **MUST** adhere to the formatting, naming conventions, and architectural patterns found in the current project files.  
* **Never Use Placeholders:** All generated or modified code **MUST** be full, complete, and operational (e.g., no // ... insert actual code ...).  
* **Security & Sanitization:** The agent **MUST** write secure code, avoiding common vulnerabilities and actively prioritizing the sanitization of inputs.  
* **Explain Complex Logic:** Add brief, focused comments to explain the "why" behind any non-obvious algorithms or complex logic.  
* **Dependency Management:** If newly generated code requires a library that is not yet installed, the agent **MUST** include a comment indicating the necessary package and import statement.

### **2.4. Quality Assurance (QA) & Testing Protocol**

* **Companion Unit Tests (Mandatory):** EVERY generated file containing functional logic **MUST** be accompanied by a dedicated, companion unit test file (.test.ts or test\_\*.py).  
* **Harnesses:** Testing is restricted exclusively to **vitest** (for TS/JS) and **pytest** (for Python).  
* **Minimum Test Scope:** The companion test file **MUST** explicitly verify: (1) Successful execution under nominal parameters, (2) Robust error handling, and (3) Validation of boundary and edge conditions.  
* **Type Enforcement:** Unyielding enforcement of **TypeScript** typing and rigorous use of **Pydantic models / explicit Type Hints** is mandatory.

### **2.5. Design & Frontend Protocol**

* **Design Language:** The visual presentation **MUST** adhere rigorously to the **Material 3 (M3)** design system.  
* **Compact Interface Preference:** All generated UIs **MUST** prioritize minimal padding, tight spacing (e.g., p-1, py-1), and compact layouts to eliminate wasted screen space.  
* **Inline Styling:** Permissible **only** when strictly necessitated by dynamic variable interpolation (e.g., calculated transforms).  
* **Focused Custom CSS:** Reserved solely for highly unique, non-standard visual effects.  
* **Preferred Animation:** Complex animations shall **ALWAYS** default to **GSAP**.

### **2.6. Waiver Protocol (Deviation Clause)**

* **Justification Required:** Any proposal to deviate from a mandate outlined in Section 1 or 2 **MUST** be accompanied by a detailed, written justification that proves the proposed alternative delivers a material, measurable advantage that outweighs the cost of non-standardization. Unsubstantiated deviations will be rejected.